### ğŸ€ HarpSharp_SERVER
<img src = "https://github.com/user-attachments/assets/e017dfcb-d65d-4e78-a607-9444707db272" width = "30%" height = "30%">

<br></br>

**HarpSharp backend**ì…ë‹ˆë‹¤. <br>
**HarpSharp**ëŠ” ë°±ì˜¤í”¼ìŠ¤ë¥¼ ì§€í–¥í•˜ëŠ” ì„œë¹„ìŠ¤ë¡œ <br>
í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ í™˜ê²½ì—ì„œ ë„ì»¤ ê¸°ë°˜ì˜ MSA ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.<br>

<br>

ì¸ì¦/ì¸ê°€ë¥¼ ë‹´ë‹¹í•˜ëŠ” **Auth** <br>
ê²Œì‹œê¸€, ëŒ“ê¸€ CRUD ê¸°ëŠ¥ì„ ê°€ì§„ **Board/TODO** <br>
ChatGPT APIë¥¼ ì—°ê²°í•œ **ìƒì„±í˜• AI ì„œë²„**ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. <br>
<br> 
í˜„ì¬ https://harpsharp.com ë„ë©”ì¸ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë©° <br>
AWS EC2ì—ì„œ ê°œë³„ ì»¨í…Œì´ë„ˆë¡œ ë°°í¬ ì¤‘ì…ë‹ˆë‹¤. <br>
<br>

### ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| ëª©ì  | ì‚¬ìš© ê¸°ìˆ  |
|:---:|:----:|
|CI/CD|![Github actions](https://img.shields.io/badge/Actions-2088FF?style=for-the-badge&logo=GithubActions&logoColor=white) ![S3](https://img.shields.io/badge/S3-569A31?style=for-the-badge&logo=AmazoneS3&logoColor=whit) ![CodeDeploy](https://img.shields.io/badge/CodeDeploy-ab0fd7?style=for-the-badge) ![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=Docker&logoColor=white) ![NGINX](https://img.shields.io/badge/NGINX-009639?style=for-the-badge&logo=Nginx&logoColor=white)|
|API ì„œë²„|![JAVA17](https://img.shields.io/badge/JAVA17-6DB33F?style=for-the-badge) ![Spring Boot 3.3.1](https://img.shields.io/badge/SpringBoot-6DB33F?style=for-the-badge&logo=SpringBoot&logoColor=white) ![Spring Security](https://img.shields.io/badge/SpringSecurity-6DB33F?style=for-the-badge&logo=SpringSecurity&logoColor=white) ![JPA](https://img.shields.io/badge/JPA-6DB33F?style=for-the-badge) ![python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white) ![Flask](https://img.shields.io/badge/Flask-000000?style=for-the-badge&logo=Flask&logoColor=white) |
| ìš´ìš© í™˜ê²½ | ![EC2 t3.medium](https://img.shields.io/badge/t3.midium-FF9900?style=for-the-badge&logo=EC2&logoColor=white) ![ubuntu](https://img.shields.io/badge/Ubuntu-E95420?style=for-the-badge&logo=Ubuntu&logoColor=white) |
| DB | ![mySQL 8.0](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=MySQL&logoColor=white) ![Redis](https://img.shields.io/badge/Redis-FF4438?style=for-the-badge&logo=Redis&logoColor=white) |
| ë¹Œë“œ | ![Gradle](https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=Gradle&logoColor=white) |
| í˜‘ì—… | ![Swagger](https://img.shields.io/badge/Swagger-85EA2D?style=for-the-badge&logo=Swagger&logoColor=white) ![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white) ![notion](https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=Notion&logoColor=white) ![Slack](https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white) |
| í…ŒìŠ¤íŠ¸ | ![JUnit5](https://img.shields.io/badge/JUnit5-25A162?style=for-the-badge&logo=JUnit5&logoColor=white) ![Postman](https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=Postman&logoColor=white) ![MockMVC](https://img.shields.io/badge/MockMVC-f2d418?style=for-the-badge)|


<br>

### ğŸ—ºï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
<img src = "https://github.com/user-attachments/assets/11003ee2-1868-4fbe-a3d1-f2afdeae2753" width = "80%" height = "80%">
<br>


### ë°°í¬ ì ˆì°¨
1. main or dev ë¸Œëœì¹˜ë¡œ push í˜¹ì€ PRì´ ë°œìƒí•˜ë©´ CI ìŠ¤í¬ë¦½íŠ¸ì— ë”°ë¼ Actionsì—ì„œ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë©ë‹ˆë‹¤. 
2. ë°°í¬ì— í•„ìš”í•œ íŒŒì¼ë“¤ì„ zipìœ¼ë¡œ ì••ì¶•í•´ S3ì— ì—…ë¡œë“œ í•©ë‹ˆë‹¤. 
3. CodeDeployì— ë°°í¬ ìš”ì²­ì„ ì „ë‹¬, íŠ¸ë¦¬ê±°ê°€ ë°œë™ë¼ S3 ë²„í‚·ì— ì—…ë¡œë“œ ëœ deploy.zip íŒŒì¼ì„ EC2ì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.
4. ìŠ¤í¬ë¦½íŠ¸ì— ë”°ë¼ ë°°í¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
   + ë°°í¬ ì¤‘ì¸ ì»¨í…Œì´ë„ˆë“¤ì„ ë‚´ë¦° í›„, ë°°í¬ í´ë” ë‚´ë¶€ì˜ docker-composeë¥¼ ì‹¤í–‰ ì‹œí‚¤ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.
6. ì˜¬ë¼ê°„ ì»¨í…Œì´ë„ˆëŠ” ë„ì»¤ bridge ë„¤íŠ¸ì›Œí¬ì— í•©ë¥˜í•˜ë©°, ë‚´ë¶€ ì»¨í…Œì´ë„ˆ ê°„ HTTP í†µì‹ ì„ í†µí•´ APIë¥¼ ì£¼ê³  ë°›ìŠµë‹ˆë‹¤.

<br></br>

### ì„œë²„ êµ¬ì„±

<img src = "https://github.com/user-attachments/assets/76e605eb-5fa3-4526-ab36-e62c526d314f" width = "80%" height = "80%">

#### ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„œë²„ (NGINX)
- ì„œë²„ì˜ ì•ë‹¨ì— ìœ„ì¹˜í•˜ë©° ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- í´ë¼ì´ì–¸íŠ¸ì˜ APIë¥¼ ì˜¬ë°”ë¥¸ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
- ì¸ì¦/ì¸ê°€ê°€ í•„ìš”í•œ ìš”ì²­ì˜ ê²½ìš° Auth ì„œë²„ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
- ì¸ì¦/ì¸ê°€ë¥¼ ë°›ì€ APIë¥¼ ê¸°ì¡´ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
#### ì¸ì¦/ì¸ê°€ ì„œë²„ (Auth)
- í—¤ë”ì— í¬í•¨ëœ JWTì˜ ìœ íš¨ì„± ê²€ì¦ ë° ì¸ì¦/ì¸ê°€ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- ìœ íš¨í•œ ìš”ì²­ì˜ ê²½ìš° Nginxìœ¼ë¡œ ê²€ì¦ì´ ì™„ë£Œë˜ì—ˆë‹¤ëŠ” ì‘ë‹µì„ ë³´ëƒ…ë‹ˆë‹¤. (200 OK)
#### ë„ë©”ì¸ ì„œë²„ (Board, Todo, AI)
- ë„ë©”ì¸ ë¡œì§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- CRUDì™€ ChatGPT API ìš”ì²­ ë° ì‘ë‹µì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. 
#### DB (mySQL, Redis)
- ì¸ì¦/ì¸ê°€ ì„œë²„ì™€ ë„ë©”ì¸ ì„œë²„ ëª¨ë‘ê°€ ê³µìœ í•˜ëŠ” DB ì…ë‹ˆë‹¤.
- RDBì—ì„  ìœ ì € ì •ë³´, Posts, Commentsì™€ ê°™ì€ ì‹¤ì§ˆì ì¸ ë¦¬ì†ŒìŠ¤ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
- Redisì˜ ê²½ìš° Refresh Tokenì„ ì €ì¥í•˜ë©° Auth ì„œë²„ì—ì„œ JWT ìœ íš¨ì„±ì„ ê²€ì¦í•˜ëŠ” ë¡œì§ì— í™œìš©ë©ë‹ˆë‹¤.


### ğŸ§± ERD
<img src = "https://github.com/user-attachments/assets/776a5064-9923-41b4-87ac-86012cf94628" width = "50%" height = "25%">  

<br>

### ğŸ ì£¼ìš” êµ¬í˜„ ì‚¬í•­
#### ë°°í¬ í™˜ê²½
1. í´ë¼ìš°ë“œ + ë„ì»¤ ê¸°ë°˜ì˜ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
1. ë„ì»¤ ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ì˜ MSA êµ¬ì„±
2. NGINX ê¸°ë°˜ì˜ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë° API ë¼ìš°íŒ… ì„œë²„

#### API
1. JWT ê¸°ë°˜ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë° ì¸ì¦/ì¸ê°€
2. Board/TODO CRUD
3. ChatGPT APIë¥¼ ì—°ë™í•œ ì±—ë´‡
  
<br>

### ğŸª™ JWT ì¸ì¦/ì¸ê°€
#### ë°œê¸‰ ì ˆì°¨
![flow_JWT drawio (1)](https://github.com/user-attachments/assets/0ca7e7e3-9a35-4c48-b80d-62876f1e1142)
1. í´ë¼ì´ì–¸íŠ¸ê°€ ë¡œê·¸ì¸ì„ ìš”ì²­í•©ë‹ˆë‹¤.
2. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ íšŒì› DBë¥¼ í™•ì¸í•´ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ê°€ ê°€ì…ëœ íšŒì›ì¸ì§€ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.
3. íšŒì›ì˜ ì‹ë³„ì + username + roleì„ ì¡°í•©í•´ Access Tokenê³¼ Refresh Tokenì„ ë°œê¸‰í•©ë‹ˆë‹¤.
4. Refresh Tokenì€ ì°¨í›„ Access Token ê²€ì¦ ê³¼ì •ì— í™œìš©ë˜ë©°, Redisì— ì €ì¥í•©ë‹ˆë‹¤. (Key: Access Token, Value: RefreshEntity)
5. HTTP í†µì‹ ì„ í†µí•´ Access Tokenì€ í—¤ë”ì— ë‹´ê³ , Refresh Tokenì€ ì¿ í‚¤ì— ë‹´ì•„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤.

<br>

#### ê²€ì¦ ê³¼ì •
![auth_JWT drawio (1)](https://github.com/user-attachments/assets/341d192a-925e-44a2-8693-610e1ba98e1a)
<br>
1. í´ë¼ì´ì–¸íŠ¸ê°€ í—¤ë”ì— Access Tokenì„ ë‹´ì•„ NGINX(í”„ë¡ì‹œ ì„œë²„)ë¡œ Requestë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
2. Requestê°€ ì¸ê°€ê°€ í•„ìš”í•œ APIì¸ ê²½ìš°, Auth ì„œë²„ë¡œ í•´ë‹¹ Requestë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
3. Requestì— ë‹´ê¸´ Access Tokenì„ êº¼ë‚´ ìœ íš¨ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.
4. Redis ë‚´ë¶€ì— Access Tokenì„ í‚¤ë¡œ ê°€ì§„ Refresh Entityê°€ ì¡´ì¬í•˜ëŠ” ì§€ í™•ì¸í•©ë‹ˆë‹¤.
5. Access Tokenê³¼ Refresh Tokenì˜ ìœ íš¨ì„± ì—¬ë¶€ë¥¼ NGINXë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
6. ìœ íš¨ì„±ì´ ê²€ì¦ëœ ê²½ìš°, ê¸°ì¡´ ë„ë©”ì¸ ì—”ë“œí¬ì¸íŠ¸ë¡œ í•´ë‹¹ ìš”ì²­ì„ ì „ë‹¬í•©ë‹ˆë‹¤.
   

<br>

### ğŸ’£ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

+ [CI/CD êµ¬ì¶•](https://www.notion.so/CI-CD-Auth-affecce9d61240faa17cb4f0cf91ec1a)
+  [ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í•„í„°ì²´ì¸ Exception Handling](https://www.notion.so/Exception-Handling-06b2eb233827434d991a43d8a128fee1)
+  [NGINX ì»¤ìŠ¤í…€ - 1](https://www.notion.so/nginx-API-5dc220068eb94a73a225bb61f9ce2451)
+  [NGINX ì»¤ìŠ¤í…€ - 2](https://www.notion.so/a81e178bafeb462085358c448ac347fa?v=d5768f826212401b9a504287b1836ad2&p=acb60a4de3dc43eba920238fefa29d64&pm=s)
+  [JPA ì—°ê´€ ê´€ê³„ ë§¤í•‘ê³¼ ì˜ì†ì„± ì»¨íƒìŠ¤íŠ¸](https://www.notion.so/a81e178bafeb462085358c448ac347fa?v=d5768f826212401b9a504287b1836ad2&p=13c0417be7aa4addbd40b336112b8a47&pm=s)
+ [Swagger + RestDocssë¥¼ í™œìš©í•œ API ëª…ì„¸ì„œ ìë™í™”ì™€ ì„œë²„ í†µí•©ê¹Œì§€ì˜ ì‹œí–‰ ì°©ì˜¤ - 1](https://www.notion.so/swagger-auth-52fd07b1114047d2b14206581a69a0ee)
+ [Swagger + RestDocssë¥¼ í™œìš©í•œ API ëª…ì„¸ì„œ ìë™í™”ì™€ ì„œë²„ í†µí•©ê¹Œì§€ì˜ ì‹œí–‰ ì°©ì˜¤ - 2](https://www.notion.so/Swagger-cab6507f18fd43c4ae53870acb839219)
+ [Response ì»¨ë²¤ì…˜ í†µí•© - 1](https://www.notion.so/Response-6baaebd19a264339906ae2ad38a1379b)
+ [Response ì»¨ë²¤ì…˜ í†µí•© - 2](https://www.notion.so/Response-1c8f497b693a4b1ba47e8d8d3770adbf)


<br>

### ğŸ•°ï¸ ì§„í–‰ í˜„í™©
#### ì„œë²„ ë°°í¬ ë° í¬ìŠ¤íŠ¸ë§¨ ê¸°ë°˜ API í…ŒìŠ¤íŠ¸ 
2024.07.17 ~ 2024.08.11
#### í”„ë¡ íŠ¸ ì—°ê²° í…ŒìŠ¤íŠ¸
2024.08.09 ~ 

<br>

#### ğŸ¤ í˜‘ì—… ë§í¬
[notion](https://www.notion.so/aa19bf4f9e87408391e2b9d29fb3a2dd) <br>
[swagger](http://harpsharp.com:9000/) <br>
